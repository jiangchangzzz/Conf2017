"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(e,this)}function i(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?r:c)(t.promise,e._value);var o;try{o=n(e._value)}catch(e){return void c(t.promise,e)}r(t.promise,o)})}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t)){var i=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof i)return void a(n(i,t),e)}e._state=1,e._value=t,u(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function a(e,t){var n=!1;try{e(function(e){n||(n=!0,r(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}var f=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,n){var o=new this.constructor(t);return i(this,new l(e,n,o)),o},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function o(r,c){try{if(c&&("object"===(void 0===c?"undefined":_typeof(c))||"function"==typeof c)){var u=c.then;if("function"==typeof u)return void u.call(c,function(e){o(r,e)},n)}t[r]=c,0==--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var i=t.length,r=0;r<t.length;r++)o(r,t[r])})},o.resolve=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var o=0,i=e.length;o<i;o++)e[o].then(t,n)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){f(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(window),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.fetchJsonp=n.exports}}(window,function(e,t){function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e,u=t.timeout||c.timeout,l=t.jsonpCallback||c.jsonpCallback,a=void 0;return new Promise(function(c,f){var s=t.jsonpCallbackFunction||n(),d=l+"_"+s;window[s]=function(e){c({ok:!0,json:function(){return Promise.resolve(e)}}),a&&clearTimeout(a),i(d),o(s)},r+=-1===r.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+r+l+"="+s),t.charset&&p.setAttribute("charset",t.charset),p.id=d,document.getElementsByTagName("head")[0].appendChild(p),a=setTimeout(function(){f(new Error("JSONP request to "+e+" timed out")),o(s),i(d)},u),p.onerror=function(){f(new Error("JSONP request to "+e+" failed")),o(s),i(d),a&&clearTimeout(a)}})}var c={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=r}),document.addEventListener("DOMContentLoaded",function(){function e(e){var o=i[e.ticketType];t(".level",e.level),t(".price",e.price),t(".ticket-type",o.type),n(".ticket-url",o.url),document.querySelector(".take-ticket").href="https://ke.qq.com/p/"+e.ticketUrl}function t(e,t){for(var n=document.querySelectorAll(e),o=0,i=n.length;o<i;o++)n[o].innerText=t}function n(e,t){for(var n=document.querySelectorAll(e),o=0,i=n.length;o<i;o++)n[o].href=t}function o(){function e(){var e={debug:!1,appId:"wxd5841c34c4a7470a",timestamp:t,nonceStr:n,signature:i,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]};wx.config(e),wx.ready(function(){var e={title:"我在IMWebConf官网中通过"+c.level+"，获得了"+c.price+"元优惠券",desc:"官网中的开发者控制台便是通向魔法大陆的大门，发挥你的脑洞，获得门票优惠券的同时，还能分享朋友圈，好奇就来试试吧~",link:"http://2017.imweb.io/",imgUrl:"http://2017.imweb.io/share1.jpg"};wx.onMenuShareTimeline({title:e.title,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(e){console.error(e)})}var t=parseInt((new Date).getTime()/1e3,10),n="R"+parseInt(1e6*Math.random(),10),o=window.location.href.replace(/#.*$/,""),i="";fetchJsonp("http://imweb.io/wx/signature?noncestr="+n+"&timestamp="+t+"&url="+o,{timeout:5e3,jsonpCallbackFunction:"callback"}).then(function(e){return e.json()}).then(function(t){i=t.signature,console.log("ajax response result:",t),e()}).catch(function(e){console.error("获取weixin签名失败",e)})}var i=[{type:"线上票",url:"http://m.ke.qq.com/courseDetail.html?_bid=167&_wv=3&course_id=226007&#tuin=996baed2&from=other"},{type:"线下票",url:"http://m.ke.qq.com/courseDetail.html?_bid=167&_wv=3&course_id=225949&#tuin=996baed2&from=other"}],r=[{level:"2关",url:"eed2cad90e774049b438813de2c73c7f4a6820c1",price:10,ticketType:0,ticketUrl:"7m2vj2fe"},{level:"4关",url:"6c1675f50ef276a001df026fb30a24788d7c5f24",price:20,ticketType:0,ticketUrl:"jyR7QBeY"},{level:"全部关卡",url:"ab5bd67695b16930da56af4093698d4ca6b11b73",price:330,ticketType:1,ticketUrl:"MzcEROVsA"}],c=null;!function(){var t=location.search;r.every(function(e){return!(t.indexOf(e.url)>0&&(c=e,1))}),c&&(e(c),o())}()});